(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[420],{12603:(e,t,s)=>{Promise.resolve().then(s.bind(s,579))},579:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(95155),l=s(12115),r=s(61086),i=s(55037);function n(){let[e,t]=(0,l.useState)(!0),[s,n]=(0,l.useState)(()=>{let e=new Date;return"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"))}),[d,o]=(0,l.useState)({totalApplications:0,statusBreakdown:{Applied:0,Interviewing:0,Offer:0,Rejected:0},platformBreakdown:{},responseRate:0});(0,l.useEffect)(()=>{c()},[s]);let c=async()=>{try{t(!0);let{data:{user:e}}=await r.N.auth.getUser();if(!e)throw Error("Not authenticated");let[a,l]=s.split("-"),i=new Date(Number(a),Number(l)-1,1),n=new Date(Number(a),Number(l),0),{data:d,error:c}=await r.N.from("job_applications").select("*").eq("user_id",e.id).gte("applied_date",i.toISOString().split("T")[0]).lte("applied_date",n.toISOString().split("T")[0]);if(c)throw c;let m={totalApplications:(null==d?void 0:d.length)||0,statusBreakdown:{Applied:0,Interviewing:0,Offer:0,Rejected:0},platformBreakdown:{},responseRate:0};null==d||d.forEach(e=>{m.statusBreakdown[e.status]++,e.platform&&(m.platformBreakdown[e.platform]=(m.platformBreakdown[e.platform]||0)+1)});let h=(null==d?void 0:d.filter(e=>"Applied"!==e.status).length)||0;m.responseRate=m.totalApplications>0?h/m.totalApplications*100:0,o(m)}catch(e){console.error("Error loading monthly stats:",e),i.Ay.error("Failed to load monthly statistics")}finally{t(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"sm:flex sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Monthly Summary"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-700",children:"Track your job application progress and statistics for each month"})]}),(0,a.jsx)("div",{className:"mt-4 sm:mt-0",children:(0,a.jsx)("select",{value:s,onChange:e=>n(e.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:(()=>{let e=[],t=new Date,s=t.getFullYear(),a=t.getMonth()+1;for(let t=0;t<12;t++){let l=s,r=a-t;r<=0&&(r+=12,l-=1),e.push({value:"".concat(l,"-").concat(String(r).padStart(2,"0")),label:new Date(l,r-1).toLocaleDateString("en-US",{year:"numeric",month:"long"})})}return e})().map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})})]}),e?(0,a.jsx)("div",{className:"text-center py-12",children:"Loading statistics..."}):(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)("div",{className:"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6",children:[(0,a.jsx)("dt",{className:"truncate text-sm font-medium text-gray-500",children:"Total Applications"}),(0,a.jsx)("dd",{className:"mt-1 text-3xl font-semibold tracking-tight text-gray-900",children:d.totalApplications})]}),(0,a.jsxs)("div",{className:"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6",children:[(0,a.jsx)("dt",{className:"truncate text-sm font-medium text-gray-500",children:"Response Rate"}),(0,a.jsxs)("dd",{className:"mt-1 text-3xl font-semibold tracking-tight text-gray-900",children:[d.responseRate.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6",children:[(0,a.jsx)("dt",{className:"truncate text-sm font-medium text-gray-500",children:"Active Interviews"}),(0,a.jsx)("dd",{className:"mt-1 text-3xl font-semibold tracking-tight text-gray-900",children:d.statusBreakdown.Interviewing})]}),(0,a.jsxs)("div",{className:"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6",children:[(0,a.jsx)("dt",{className:"truncate text-sm font-medium text-gray-500",children:"Offers Received"}),(0,a.jsx)("dd",{className:"mt-1 text-3xl font-semibold tracking-tight text-gray-900",children:d.statusBreakdown.Offer})]})]}),!e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"overflow-hidden rounded-lg bg-white shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-base font-semibold leading-6 text-gray-900",children:"Application Status Breakdown"}),(0,a.jsx)("div",{className:"mt-6 grid grid-cols-1 gap-4",children:Object.entries(d.statusBreakdown).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"h-4 w-4 rounded-full mr-2 ".concat("Applied"===t?"bg-blue-500":"Interviewing"===t?"bg-yellow-500":"Offer"===t?"bg-green-500":"bg-red-500")}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:t})]}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:s})]},t)})})]})}),Object.keys(d.platformBreakdown).length>0&&(0,a.jsx)("div",{className:"overflow-hidden rounded-lg bg-white shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-base font-semibold leading-6 text-gray-900",children:"Application Platforms"}),(0,a.jsx)("div",{className:"mt-6 grid grid-cols-1 gap-4",children:Object.entries(d.platformBreakdown).sort((e,t)=>{let[,s]=e,[,a]=t;return a-s}).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:t}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:s})]},t)})})]})})]})]})}},61086:(e,t,s)=>{"use strict";s.d(t,{N:()=>a});let a=(0,s(35974).UU)("https://iiugtjtdfavdojniaguw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlpdWd0anRkZmF2ZG9qbmlhZ3V3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzg4NjgwNjUsImV4cCI6MjA1NDQ0NDA2NX0.NEOVJZQ7ahibUkzauftL3Dt2UrP1dszTQToyB87fnwo",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}},e=>{var t=t=>e(e.s=t);e.O(0,[37,736,441,517,358],()=>t(12603)),_N_E=e.O()}]);