(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[814],{6400:function(e,a,t){Promise.resolve().then(t.bind(t,8498))},8498:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return k}});var s=t(3827),r=t(4090),n=t(7907),i=t(1097),l=t(8009),c=t(7241),o=t(2388),d=t(4121),m=t(2685),h=t(1640),x=t(1040);function g(){let e=(0,n.useRouter)();(0,n.usePathname)();let[a,t]=(0,r.useState)(""),[g,u]=(0,r.useState)([]),[p,f]=(0,r.useState)([]),[y,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{j()},[]);let j=async()=>{try{let{data:{user:e}}=await i.O.auth.getUser();if(!e)return;let a=new Date,t=new Date;t.setDate(a.getDate()+7);let{data:s}=await i.O.from("interviews").select("\n          *,\n          job_applications (\n            company,\n            position\n          )\n        ").eq("user_id",e.id).gte("interview_date",a.toISOString()).lte("interview_date",t.toISOString()).order("interview_date",{ascending:!0});if(s){let e=s.map(e=>{let t=new Date(e.interview_date),s=Math.ceil((t.getTime()-a.getTime())/864e5),r="";return r=0===s?"Today":1===s?"Tomorrow":"In ".concat(s," days"),{id:e.id,title:"Interview ".concat(r),message:"Interview at ".concat(e.job_applications.company," for ").concat(e.job_applications.position," position"),date:t.toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}});f(e)}}catch(e){console.error("Error loading notifications:",e)}},N=async e=>{if(t(e),0===e.trim().length){u([]),v(!1);return}try{let{data:{user:a}}=await i.O.auth.getUser();if(!a)return;let{data:t,error:s}=await i.O.from("job_applications").select("*").eq("user_id",a.id).or("company.ilike.%".concat(e,"%,position.ilike.%").concat(e,"%")).order("applied_date",{ascending:!1});if(s)throw s;u(t||[]),v(!0)}catch(e){console.error("Error searching applications:",e),l.default.error("Failed to search applications")}},w=async()=>{try{let{error:a}=await i.O.auth.signOut();if(a)throw a;localStorage.removeItem("rememberedEmail"),localStorage.removeItem("rememberedPassword"),l.default.success("Signed out successfully"),e.refresh(),e.push("/")}catch(e){l.default.error(e.message||"Error signing out"),console.error("Error:",e)}};return(0,s.jsx)("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[(0,s.jsx)("div",{className:"flex flex-1 items-center gap-x-4 lg:gap-x-6",children:(0,s.jsxs)("div",{className:"relative flex flex-1",children:[(0,s.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:(0,s.jsx)(m.Z,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),(0,s.jsx)("input",{type:"search",placeholder:"Search applications...",value:a,onChange:e=>N(e.target.value),onFocus:()=>v(!0),className:"block h-10 w-full rounded-md border-0 py-1.5 pl-10 pr-3 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-teal-500 sm:text-sm sm:leading-6"}),y&&g.length>0&&(0,s.jsx)("div",{className:"absolute mt-12 w-full rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",children:g.map(e=>(0,s.jsxs)("a",{href:"/applications?id=".concat(e.id),className:"block px-4 py-2 hover:bg-gray-100",onClick:()=>v(!1),children:[(0,s.jsx)("div",{className:"font-medium",children:e.company}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.position})]},e.id))})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[(0,s.jsxs)(c.J,{className:"relative",children:[(0,s.jsxs)(c.J.Button,{className:"-m-2.5 p-2.5 text-gray-400 hover:text-gray-500",children:[(0,s.jsx)("span",{className:"sr-only",children:"View notifications"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(h.Z,{className:"h-6 w-6","aria-hidden":"true"}),p.length>0&&(0,s.jsx)("div",{className:"absolute -right-1 -top-1 h-4 w-4 rounded-full bg-red-500 text-xs text-white flex items-center justify-center",children:p.length})]})]}),(0,s.jsx)(o.u,{as:r.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:(0,s.jsx)(c.J.Panel,{className:"absolute right-0 z-10 mt-2.5 w-80",children:(0,s.jsx)("div",{className:"rounded-lg bg-white py-2 shadow-lg ring-1 ring-gray-900/5",children:0===p.length?(0,s.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No new notifications"}):p.map(e=>(0,s.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-50",children:[(0,s.jsx)("div",{className:"font-medium text-sm",children:e.title}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.message}),(0,s.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:e.date})]},e.id))})})})]}),(0,s.jsx)("div",{className:"hidden lg:block lg:h-6 lg:w-px lg:bg-gray-200","aria-hidden":"true"}),(0,s.jsxs)(d.v,{as:"div",className:"relative",children:[(0,s.jsxs)(d.v.Button,{className:"-m-1.5 flex items-center p-1.5",children:[(0,s.jsx)("span",{className:"sr-only",children:"Open user menu"}),(0,s.jsx)(x.Z,{className:"h-8 w-8 text-gray-400","aria-hidden":"true"}),(0,s.jsx)("span",{className:"hidden lg:flex lg:items-center",children:(0,s.jsx)("span",{className:"ml-4 text-sm font-semibold leading-6 text-gray-900","aria-hidden":"true",children:"My Account"})})]}),(0,s.jsx)(o.u,{as:r.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,s.jsx)(d.v.Items,{className:"absolute right-0 z-10 mt-2.5 w-32 origin-top-right rounded-md bg-white py-2 shadow-lg ring-1 ring-gray-900/5 focus:outline-none",children:(0,s.jsx)(d.v.Item,{children:e=>{let{active:a}=e;return(0,s.jsx)("button",{onClick:w,className:"".concat(a?"bg-gray-50":""," block w-full px-3 py-1 text-left text-sm leading-6 text-gray-900"),children:"Sign out"})}})})})]})]})]})})}var u=t(7236),p=t(3536),f=t(7393),y=t(3478),v=t(4102),j=t(9097);let N=()=>"/careertrackpro",w=[{name:"Dashboard",href:"".concat(N(),"/dashboard"),icon:p.Z},{name:"Applications",href:"".concat(N(),"/applications"),icon:f.Z},{name:"Monthly Summary",href:"".concat(N(),"/monthly-summary"),icon:y.Z}],b=[{name:"Settings",href:"".concat(N(),"/settings"),icon:v.Z},{name:"Help",href:"".concat(N(),"/help"),icon:j.Z}];function k(e){let{children:a}=e,t=(0,n.usePathname)(),l=(0,n.useRouter)();(0,r.useEffect)(()=>{(async()=>{let{data:{session:e}}=await i.O.auth.getSession();e||l.push(N()+"/")})()},[l]);let c=e=>t===e;return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"flex min-h-screen",children:[(0,s.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64",children:(0,s.jsxs)("div",{className:"flex flex-grow flex-col overflow-y-auto border-r border-gray-200 bg-white",children:[(0,s.jsx)("div",{className:"flex h-16 flex-shrink-0 items-center px-4 border-b border-gray-200",children:(0,s.jsx)("h1",{className:"text-xl font-bold text-teal-600",children:"CareerTrack Pro"})}),(0,s.jsx)("div",{className:"flex flex-grow flex-col",children:(0,s.jsxs)("nav",{className:"flex-1 space-y-1 px-2 py-4",children:[(0,s.jsx)("div",{className:"space-y-1",children:w.map(e=>{let a=c(e.href);return(0,s.jsxs)(u.default,{href:e.href,className:"nav-link w-full text-left flex items-center ".concat(a?"nav-link-active":""),children:[(0,s.jsx)(e.icon,{className:"nav-icon ".concat(a?"nav-icon-active":""),"aria-hidden":"true"}),e.name]},e.name)})}),(0,s.jsx)("div",{className:"mt-8 pt-8 border-t border-gray-200",children:b.map(e=>{let a=c(e.href);return(0,s.jsxs)(u.default,{href:e.href,className:"nav-link w-full text-left flex items-center ".concat(a?"nav-link-active":""),children:[(0,s.jsx)(e.icon,{className:"nav-icon ".concat(a?"nav-icon-active":""),"aria-hidden":"true"}),e.name]},e.name)})})]})})]})}),(0,s.jsxs)("div",{className:"lg:pl-64 flex flex-col flex-1",children:[(0,s.jsx)(g,{}),(0,s.jsx)("main",{className:"flex-1 py-8",children:(0,s.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:a})})]})]})})}},1097:function(e,a,t){"use strict";t.d(a,{O:function(){return s}});let s=(0,t(3975).eI)("https://iiugtjtdfavdojniaguw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlpdWd0anRkZmF2ZG9qbmlhZ3V3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzg4NjgwNjUsImV4cCI6MjA1NDQ0NDA2NX0.NEOVJZQ7ahibUkzauftL3Dt2UrP1dszTQToyB87fnwo",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storageKey:"careertrack-auth",storage:window.localStorage}})}},function(e){e.O(0,[9,975,448,971,69,744],function(){return e(e.s=6400)}),_N_E=e.O()}]);