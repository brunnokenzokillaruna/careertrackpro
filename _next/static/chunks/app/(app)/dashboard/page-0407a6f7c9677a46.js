(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{2301:function(e,t,i){Promise.resolve().then(i.bind(i,8558))},8558:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return w}});var a=i(3827),s=i(4090),n=i(1282),r=i(8e3),l=i(4992),o=i(7488),d=i(3437),c=i(1097),u=i(8009);i(5597);var m=i(4424);function h(e){let{isOpen:t,onClose:i,onInterviewAdded:n,interview:r,selectedDate:l}=e,[o,d]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),[x,v]=(0,s.useState)([]),[w,f]=(0,s.useState)({application_id:"",interview_date:"",location:"",notes:""});(0,s.useEffect)(()=>{t&&(g(),r?f({application_id:String(r.application_id),interview_date:new Date(r.interview_date).toISOString().slice(0,16),location:r.location||"",notes:r.notes||""}):l?f(e=>({...e,interview_date:l.toISOString().slice(0,16)})):f({application_id:"",interview_date:new Date().toISOString().slice(0,16),location:"",notes:""}))},[t,r,l]);let g=async()=>{try{let{data:{user:e}}=await c.O.auth.getUser();if(!e)throw Error("Not authenticated");let{data:t,error:i}=await c.O.from("job_applications").select("*").eq("user_id",e.id).in("status",["Applied","Interviewing"]).order("company",{ascending:!0});if(i)throw i;v(t||[])}catch(e){console.error("Error loading applications:",e),u.default.error("Failed to load applications")}},b=async e=>{e.preventDefault(),d(!0);try{let{data:{user:e}}=await c.O.auth.getUser();if(!e)throw Error("Not authenticated");let t={application_id:parseInt(w.application_id),user_id:e.id,interview_date:new Date(w.interview_date).toISOString(),location:w.location.trim()||null,notes:w.notes.trim()||null},{error:a}=await c.O.from("job_applications").update({status:"Interviewing"}).eq("id",w.application_id);if(a)throw a;if(null==r?void 0:r.id){let{error:e}=await c.O.from("interviews").update(t).eq("id",r.id);if(e)throw e;u.default.success("Interview updated successfully")}else{let{error:e}=await c.O.from("interviews").insert([t]);if(e)throw e;u.default.success("Interview scheduled successfully")}n(),i()}catch(e){console.error("Error saving interview:",e),u.default.error(e.message||"Failed to save interview")}finally{d(!1)}},y=async()=>{d(!0);try{if(!(null==r?void 0:r.id))return;let{error:e}=await c.O.from("interviews").delete().eq("id",r.id);if(e)throw e;u.default.success("Interview deleted successfully"),n(),i()}catch(e){console.error("Error deleting interview:",e),u.default.error(e.message||"Failed to delete interview")}finally{d(!1)}};return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex min-h-screen items-center justify-center px-4",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:i}),(0,a.jsxs)("div",{className:"relative w-full max-w-md transform rounded-lg bg-white p-6 shadow-xl transition-all",children:[(0,a.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:r?"Edit Interview":"Schedule Interview"}),r&&(0,a.jsx)("button",{onClick:()=>p(!0),className:"text-red-600 hover:text-red-700",disabled:o,children:(0,a.jsx)(m.Z,{className:"h-5 w-5"})})]}),h?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this interview? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>p(!1),className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",disabled:o,children:"Cancel"}),(0,a.jsx)("button",{type:"button",onClick:y,className:"rounded-md border border-transparent bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700",disabled:o,children:o?"Deleting...":"Delete"})]})]}):(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"application_id",className:"block text-sm font-medium text-gray-700",children:"Application"}),(0,a.jsxs)("select",{id:"application_id",value:w.application_id,onChange:e=>f({...w,application_id:e.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500",children:[(0,a.jsx)("option",{value:"",children:"Select an application"}),x.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.company," - ",e.position]},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"interview_date",className:"block text-sm font-medium text-gray-700",children:"Interview Date & Time"}),(0,a.jsx)("input",{type:"datetime-local",id:"interview_date",value:w.interview_date,onChange:e=>f({...w,interview_date:e.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700",children:"Location"}),(0,a.jsx)("input",{type:"text",id:"location",value:w.location,onChange:e=>f({...w,location:e.target.value}),placeholder:"Office address or virtual meeting link",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:"Notes"}),(0,a.jsx)("textarea",{id:"notes",value:w.notes,onChange:e=>f({...w,notes:e.target.value}),rows:3,placeholder:"Any additional notes about the interview",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500"})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:i,className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:o,className:"rounded-md border border-transparent bg-teal-600 px-4 py-2 text-sm font-medium text-white hover:bg-teal-700 disabled:opacity-50",children:o?"Saving...":r?"Update Interview":"Schedule Interview"})]})]})]})]})}):null}var p=i(1310);let x={"en-US":i(6060)},v=(0,n.lD)({format:r.WU,parse:l.Qc,startOfWeek:o.z,getDay:d.w,locales:x});function w(){let[e,t]=(0,s.useState)([]),[i,r]=(0,s.useState)({totalApplications:0,activeInterviews:0,applicationsThisMonth:0,responseRate:0}),[l,o]=(0,s.useState)(!1),[d,m]=(0,s.useState)(void 0),[x,w]=(0,s.useState)(void 0),[f,g]=(0,s.useState)("week");(0,s.useEffect)(()=>{b()},[]);let b=async()=>{try{let{data:{user:e}}=await c.O.auth.getUser();if(!e)throw Error("Not authenticated");let{data:i,error:a}=await c.O.from("interviews").select("*").eq("user_id",e.id).gte("interview_date",new Date().toISOString());if(a)throw a;t(i||[]);let{data:s,error:n}=await c.O.from("job_applications").select("*").eq("user_id",e.id);if(n)throw n;let l=new Date,o=new Date(l.getFullYear(),l.getMonth(),1),d=(null==s?void 0:s.length)||0,u=(null==i?void 0:i.length)||0,m=(null==s?void 0:s.filter(e=>new Date(e.applied_date)>=o).length)||0,h=(null==s?void 0:s.filter(e=>"Applied"!==e.status).length)||0;r({totalApplications:d,activeInterviews:u,applicationsThisMonth:m,responseRate:d>0?Math.round(h/d*100):0})}catch(e){console.error("Error loading dashboard data:",e),u.default.error("Failed to load dashboard data")}},y=e.map(e=>({title:"Interview at ".concat(e.location||"TBD"),start:new Date(e.interview_date),end:new Date(new Date(e.interview_date).getTime()+36e5),resource:e}));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"sm:flex sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Dashboard"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Welcome to CareerTrack Pro. Track your job applications and interviews in one place."})]}),(0,a.jsx)("div",{className:"mt-4 sm:mt-0",children:(0,a.jsxs)("button",{onClick:()=>{m(void 0),w(void 0),o(!0)},className:"inline-flex items-center justify-center rounded-md bg-teal-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-teal-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-teal-600",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5 mr-2"}),"Schedule Interview"]})})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)("div",{className:"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6",children:[(0,a.jsx)("dt",{className:"truncate text-sm font-medium text-gray-500",children:"Total Applications"}),(0,a.jsx)("dd",{className:"mt-1 text-3xl font-semibold tracking-tight text-gray-900",children:i.totalApplications})]}),(0,a.jsxs)("div",{className:"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6",children:[(0,a.jsx)("dt",{className:"truncate text-sm font-medium text-gray-500",children:"Active Interviews"}),(0,a.jsx)("dd",{className:"mt-1 text-3xl font-semibold tracking-tight text-gray-900",children:i.activeInterviews})]}),(0,a.jsxs)("div",{className:"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6",children:[(0,a.jsx)("dt",{className:"truncate text-sm font-medium text-gray-500",children:"Applications This Month"}),(0,a.jsx)("dd",{className:"mt-1 text-3xl font-semibold tracking-tight text-gray-900",children:i.applicationsThisMonth})]}),(0,a.jsxs)("div",{className:"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6",children:[(0,a.jsx)("dt",{className:"truncate text-sm font-medium text-gray-500",children:"Response Rate"}),(0,a.jsxs)("dd",{className:"mt-1 text-3xl font-semibold tracking-tight text-gray-900",children:[i.responseRate,"%"]})]})]}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)("div",{className:"overflow-hidden rounded-lg bg-white shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-base font-semibold leading-6 text-gray-900",children:"Upcoming Interviews"}),(0,a.jsx)("div",{className:"mt-2",style:{height:"500px"},children:(0,a.jsx)(n.f,{localizer:v,events:y,startAccessor:"start",endAccessor:"end",style:{height:"100%"},onSelectEvent:e=>{m(e.resource),o(!0)},onSelectSlot:e=>{let{start:t}=e;w(t),m(void 0),o(!0)},selectable:!0,view:f,onView:e=>g(e),defaultView:"week",views:["month","week","day"],tooltipAccessor:e=>{var t;return"".concat(e.title,"\n").concat((null===(t=e.resource)||void 0===t?void 0:t.notes)||"")},popup:!0,step:60,timeslots:1})})]})})}),(0,a.jsx)(h,{isOpen:l,onClose:()=>o(!1),onInterviewAdded:b,interview:d,selectedDate:x})]})}},1097:function(e,t,i){"use strict";i.d(t,{O:function(){return a}});let a=(0,i(3975).eI)("https://iiugtjtdfavdojniaguw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlpdWd0anRkZmF2ZG9qbmlhZ3V3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzg4NjgwNjUsImV4cCI6MjA1NDQ0NDA2NX0.NEOVJZQ7ahibUkzauftL3Dt2UrP1dszTQToyB87fnwo",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}},function(e){e.O(0,[856,9,975,736,971,69,744],function(){return e(e.s=2301)}),_N_E=e.O()}]);