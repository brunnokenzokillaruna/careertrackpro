(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{825:function(e,t,s){Promise.resolve().then(s.bind(s,3362))},3362:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(3827),l=s(4090),i=s(1097),r=s(8009);function o(e){let{isOpen:t,onClose:s,onApplicationAdded:o,application:n}=e,[d,c]=(0,l.useState)(!1),[m,p]=(0,l.useState)({company:"",position:"",status:"Applied",applied_date:new Date().toISOString().split("T")[0],notes:"",job_url:"",platform:""});(0,l.useEffect)(()=>{n?p({company:n.company||"",position:n.position||"",status:n.status||"Applied",applied_date:new Date(n.applied_date).toISOString().split("T")[0],notes:n.notes||"",job_url:n.job_url||"",platform:n.platform||""}):p({company:"",position:"",status:"Applied",applied_date:new Date().toISOString().split("T")[0],notes:"",job_url:"",platform:""})},[n,t]);let u=async e=>{e.preventDefault(),c(!0);try{var t,a,l,d,p;let{data:{user:e},error:c}=await i.O.auth.getUser();if(c)throw c;if(!e)throw Error("Not authenticated");let u={user_id:e.id,company:m.company.trim(),position:m.position.trim(),status:m.status,applied_date:m.applied_date,notes:(null===(t=m.notes)||void 0===t?void 0:t.trim())||null,job_url:(null===(a=m.job_url)||void 0===a?void 0:a.trim())||null,platform:(null===(l=m.platform)||void 0===l?void 0:l.trim())||null},{data:x,error:h}=await i.O.from("users").select("id").eq("id",e.id).maybeSingle();if(h)throw console.error("Error checking user profile:",h),Error("Failed to check user profile");if(!x){let{error:t}=await i.O.from("users").upsert([{id:e.id,email:e.email,name:(null===(d=e.user_metadata)||void 0===d?void 0:d.full_name)||(null===(p=e.email)||void 0===p?void 0:p.split("@")[0])||"User",created_at:new Date().toISOString()}],{onConflict:"id"});if(t)throw console.error("Error creating user profile:",t),Error(t.message)}if(n){let{data:e,error:t}=await i.O.from("job_applications").update(u).eq("id",n.id).select().single();if(t)throw console.error("Update error:",t),Error(t.message);if(!e)throw Error("Failed to update application");r.default.success("Application updated successfully!")}else{let{data:e,error:t}=await i.O.from("job_applications").insert([u]).select().single();if(t)throw console.error("Insert error:",t),Error(t.message);if(!e)throw Error("Failed to create application");r.default.success("Application added successfully!")}o(),s()}catch(e){console.error("Error saving application:",e),r.default.error(e.message||"Failed to save application")}finally{c(!1)}};return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex min-h-screen items-center justify-center px-4",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:s}),(0,a.jsxs)("div",{className:"relative w-full max-w-md transform rounded-lg bg-white p-6 shadow-xl transition-all",children:[(0,a.jsxs)("button",{onClick:s,className:"absolute right-4 top-4 text-gray-400 hover:text-gray-500",children:[(0,a.jsx)("span",{className:"sr-only",children:"Close"}),(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:n?"Edit Application":"Add New Application"}),(0,a.jsxs)("form",{onSubmit:u,className:"mt-4 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700",children:"Company"}),(0,a.jsx)("input",{type:"text",id:"company",required:!0,value:m.company,onChange:e=>p({...m,company:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"position",className:"block text-sm font-medium text-gray-700",children:"Position"}),(0,a.jsx)("input",{type:"text",id:"position",required:!0,value:m.position,onChange:e=>p({...m,position:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,a.jsxs)("select",{id:"status",required:!0,value:m.status,onChange:e=>p({...m,status:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500",children:[(0,a.jsx)("option",{value:"Applied",children:"Applied"}),(0,a.jsx)("option",{value:"Interviewing",children:"Interviewing"}),(0,a.jsx)("option",{value:"Offer",children:"Offer"}),(0,a.jsx)("option",{value:"Rejected",children:"Rejected"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"applied_date",className:"block text-sm font-medium text-gray-700",children:"Applied Date"}),(0,a.jsx)("input",{type:"date",id:"applied_date",required:!0,value:m.applied_date,onChange:e=>p({...m,applied_date:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"job_url",className:"block text-sm font-medium text-gray-700",children:"Job URL"}),(0,a.jsx)("input",{type:"url",id:"job_url",value:m.job_url,onChange:e=>p({...m,job_url:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"platform",className:"block text-sm font-medium text-gray-700",children:"Platform"}),(0,a.jsx)("input",{type:"text",id:"platform",value:m.platform,onChange:e=>p({...m,platform:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500",placeholder:"e.g., LinkedIn, Indeed, Company Website"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:"Notes"}),(0,a.jsx)("textarea",{id:"notes",rows:3,value:m.notes,onChange:e=>p({...m,notes:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500"})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("button",{type:"submit",disabled:d,className:"w-full rounded-md bg-teal-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-teal-500 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 disabled:opacity-50",children:d?"Saving...":n?"Update Application":"Add Application"})})]})]})]})}):null}var n=s(1310);let d=l.forwardRef(function(e,t){let{title:s,titleId:a,...i}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},i),s?l.createElement("title",{id:a},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))});var c=s(4424);function m(e){let{isOpen:t,onClose:s,onConfirm:l,title:i,message:r,confirmButtonText:o="Delete",cancelButtonText:n="Cancel"}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex min-h-screen items-center justify-center px-4",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:s}),(0,a.jsxs)("div",{className:"relative w-full max-w-md transform rounded-lg bg-white p-6 shadow-xl transition-all",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:i}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:r})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:n}),(0,a.jsx)("button",{type:"button",onClick:()=>{l(),s()},className:"rounded-md border border-transparent bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700",children:o})]})]})]})}):null}function p(){let[e,t]=(0,l.useState)([]),[s,p]=(0,l.useState)(!0),[u,x]=(0,l.useState)(!1),[h,f]=(0,l.useState)(void 0),[g,b]=(0,l.useState)(!1),[j,y]=(0,l.useState)(null);(0,l.useEffect)(()=>{w()},[]);let w=async()=>{try{let{data:{user:e}}=await i.O.auth.getUser();if(!e)throw Error("Not authenticated");let{data:s,error:a}=await i.O.from("job_applications").select("*").eq("user_id",e.id).order("applied_date",{ascending:!1});if(a)throw a;t(s||[])}catch(e){console.error("Error loading applications:",e),r.default.error("Failed to load applications")}finally{p(!1)}},v=e=>{f(e),x(!0)},N=e=>{y(e),b(!0)},k=async()=>{if(j)try{let{error:e}=await i.O.from("job_applications").delete().eq("id",j.id);if(e)throw e;r.default.success("Application deleted successfully"),w()}catch(e){console.error("Error deleting application:",e),r.default.error("Failed to delete application")}},_=e=>{let t=new Date(e),s=6e4*t.getTimezoneOffset();return new Date(t.getTime()+s).toLocaleDateString()};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"sm:flex sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Job Applications"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-700",children:"A list of all your job applications"})]}),(0,a.jsx)("div",{className:"mt-4 sm:mt-0",children:(0,a.jsxs)("button",{onClick:()=>{f(void 0),x(!0)},type:"button",className:"inline-flex items-center justify-center rounded-md bg-teal-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-teal-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-teal-600",children:[(0,a.jsx)(n.Z,{className:"h-5 w-5 mr-2"}),"Add application"]})})]}),(0,a.jsx)("div",{className:"mt-8 flow-root",children:(0,a.jsx)("div",{className:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,a.jsx)("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Company"}),(0,a.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Position"}),(0,a.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Status"}),(0,a.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Applied Date"}),(0,a.jsx)("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-6",children:(0,a.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:s?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"py-4 text-center text-sm text-gray-500",children:"Loading..."})}):0===e.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"py-4 text-center text-sm text-gray-500",children:"No applications found. Start by adding one!"})}):e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6",children:e.company}),(0,a.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.position}),(0,a.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm",children:(0,a.jsx)("span",{className:"inline-flex rounded-full px-2 text-xs font-semibold leading-5 ".concat("Applied"===e.status?"bg-blue-100 text-blue-800":"Interviewing"===e.status?"bg-yellow-100 text-yellow-800":"Offer"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})}),(0,a.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:_(e.applied_date)}),(0,a.jsx)("td",{className:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsxs)("button",{onClick:()=>v(e),className:"text-teal-600 hover:text-teal-900",children:[(0,a.jsx)(d,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Edit"})]}),(0,a.jsxs)("button",{onClick:()=>N(e),className:"text-red-600 hover:text-red-900",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Delete"})]})]})})]},e.id))})]})})})})}),(0,a.jsx)(o,{isOpen:u,onClose:()=>{x(!1),f(void 0)},onApplicationAdded:w,application:h}),(0,a.jsx)(m,{isOpen:g,onClose:()=>b(!1),onConfirm:k,title:"Delete Application",message:"Are you sure you want to delete this application? This action cannot be undone.",confirmButtonText:"Delete",cancelButtonText:"Cancel"})]})}},1097:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});let a=(0,s(3975).eI)("https://iiugtjtdfavdojniaguw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlpdWd0anRkZmF2ZG9qbmlhZ3V3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzg4NjgwNjUsImV4cCI6MjA1NDQ0NDA2NX0.NEOVJZQ7ahibUkzauftL3Dt2UrP1dszTQToyB87fnwo",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storageKey:"careertrack-auth",storage:window.localStorage}})},1310:function(e,t,s){"use strict";var a=s(4090);let l=a.forwardRef(function(e,t){let{title:s,titleId:l,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),s?a.createElement("title",{id:l},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});t.Z=l},4424:function(e,t,s){"use strict";var a=s(4090);let l=a.forwardRef(function(e,t){let{title:s,titleId:l,...i}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),s?a.createElement("title",{id:l},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});t.Z=l}},function(e){e.O(0,[9,975,971,69,744],function(){return e(e.s=825)}),_N_E=e.O()}]);