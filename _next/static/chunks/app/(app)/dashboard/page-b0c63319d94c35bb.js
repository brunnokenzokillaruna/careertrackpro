(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[536],{33063:(e,t,i)=>{Promise.resolve().then(i.bind(i,64822))},64822:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>w});var a=i(95155),s=i(12115),r=i(17389),l=i(60960),n=i(50830),o=i(95370),d=i(96939),c=i(61086),m=i(55037);i(33174);var u=i(21096);function h(e){let{isOpen:t,onClose:i,onInterviewAdded:r,interview:l,selectedDate:n}=e,[o,d]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),[x,v]=(0,s.useState)([]),[w,g]=(0,s.useState)({application_id:"",interview_date:"",location:"",notes:""});(0,s.useEffect)(()=>{t&&(f(),l?g({application_id:String(l.application_id),interview_date:new Date(l.interview_date).toISOString().slice(0,16),location:l.location||"",notes:l.notes||""}):n?g(e=>({...e,interview_date:n.toISOString().slice(0,16)})):g({application_id:"",interview_date:new Date().toISOString().slice(0,16),location:"",notes:""}))},[t,l,n]);let f=async()=>{try{let{data:{user:e}}=await c.N.auth.getUser();if(!e)throw Error("Not authenticated");let{data:t,error:i}=await c.N.from("job_applications").select("*").eq("user_id",e.id).in("status",["Applied","Interviewing"]).order("company",{ascending:!0});if(i)throw i;v(t||[])}catch(e){console.error("Error loading applications:",e),m.Ay.error("Failed to load applications")}},b=async e=>{e.preventDefault(),d(!0);try{let{data:{user:e}}=await c.N.auth.getUser();if(!e)throw Error("Not authenticated");let t={application_id:parseInt(w.application_id),user_id:e.id,interview_date:new Date(w.interview_date).toISOString(),location:w.location.trim()||null,notes:w.notes.trim()||null},{error:a}=await c.N.from("job_applications").update({status:"Interviewing"}).eq("id",w.application_id);if(a)throw a;if(null==l?void 0:l.id){let{error:e}=await c.N.from("interviews").update(t).eq("id",l.id);if(e)throw e;m.Ay.success("Interview updated successfully")}else{let{error:e}=await c.N.from("interviews").insert([t]);if(e)throw e;m.Ay.success("Interview scheduled successfully")}r(),i()}catch(e){console.error("Error saving interview:",e),m.Ay.error(e.message||"Failed to save interview")}finally{d(!1)}},y=async()=>{d(!0);try{if(!(null==l?void 0:l.id))return;let{error:e}=await c.N.from("interviews").delete().eq("id",l.id);if(e)throw e;m.Ay.success("Interview deleted successfully"),r(),i()}catch(e){console.error("Error deleting interview:",e),m.Ay.error(e.message||"Failed to delete interview")}finally{d(!1)}};return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex min-h-screen items-center justify-center px-4",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:i}),(0,a.jsxs)("div",{className:"relative w-full max-w-md transform rounded-lg bg-white p-6 shadow-xl transition-all",children:[(0,a.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:l?"Edit Interview":"Schedule Interview"}),l&&(0,a.jsx)("button",{onClick:()=>p(!0),className:"text-red-600 hover:text-red-700",disabled:o,children:(0,a.jsx)(u.A,{className:"h-5 w-5"})})]}),h?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this interview? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>p(!1),className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",disabled:o,children:"Cancel"}),(0,a.jsx)("button",{type:"button",onClick:y,className:"rounded-md border border-transparent bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700",disabled:o,children:o?"Deleting...":"Delete"})]})]}):(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"application_id",className:"block text-sm font-medium text-gray-700",children:"Application"}),(0,a.jsxs)("select",{id:"application_id",value:w.application_id,onChange:e=>g({...w,application_id:e.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500",children:[(0,a.jsx)("option",{value:"",children:"Select an application"}),x.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.company," - ",e.position]},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"interview_date",className:"block text-sm font-medium text-gray-700",children:"Interview Date & Time"}),(0,a.jsx)("input",{type:"datetime-local",id:"interview_date",value:w.interview_date,onChange:e=>g({...w,interview_date:e.target.value}),required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700",children:"Location"}),(0,a.jsx)("input",{type:"text",id:"location",value:w.location,onChange:e=>g({...w,location:e.target.value}),placeholder:"Office address or virtual meeting link",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:"Notes"}),(0,a.jsx)("textarea",{id:"notes",value:w.notes,onChange:e=>g({...w,notes:e.target.value}),rows:3,placeholder:"Any additional notes about the interview",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500"})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:i,className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:o,className:"rounded-md border border-transparent bg-teal-600 px-4 py-2 text-sm font-medium text-white hover:bg-teal-700 disabled:opacity-50",children:o?"Saving...":l?"Update Interview":"Schedule Interview"})]})]})]})]})}):null}var p=i(49904);let x={"en-US":i(555)},v=(0,r.Hz)({format:l.GP,parse:n.qg,startOfWeek:o.k,getDay:d.P,locales:x});function w(){let[e,t]=(0,s.useState)([]),[i,l]=(0,s.useState)({totalApplications:0,activeInterviews:0,applicationsThisMonth:0,responseRate:0}),[n,o]=(0,s.useState)(!1),[d,u]=(0,s.useState)(void 0),[x,w]=(0,s.useState)(void 0),[g,f]=(0,s.useState)("week");(0,s.useEffect)(()=>{b()},[]);let b=async()=>{try{let{data:{user:e}}=await c.N.auth.getUser();if(!e)throw Error("Not authenticated");let{data:i,error:a}=await c.N.from("interviews").select("*").eq("user_id",e.id).gte("interview_date",new Date().toISOString());if(a)throw a;t(i||[]);let{data:s,error:r}=await c.N.from("job_applications").select("*").eq("user_id",e.id);if(r)throw r;let n=new Date,o=new Date(n.getFullYear(),n.getMonth(),1),d=(null==s?void 0:s.length)||0,m=(null==i?void 0:i.length)||0,u=(null==s?void 0:s.filter(e=>new Date(e.applied_date)>=o).length)||0,h=(null==s?void 0:s.filter(e=>"Applied"!==e.status).length)||0,p=d>0?Math.round(h/d*100):0;l({totalApplications:d,activeInterviews:m,applicationsThisMonth:u,responseRate:p})}catch(e){console.error("Error loading dashboard data:",e),m.Ay.error("Failed to load dashboard data")}},y=e.map(e=>({title:"Interview at ".concat(e.location||"TBD"),start:new Date(e.interview_date),end:new Date(new Date(e.interview_date).getTime()+36e5),resource:e}));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"sm:flex sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Dashboard"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Welcome to CareerTrack Pro. Track your job applications and interviews in one place."})]}),(0,a.jsx)("div",{className:"mt-4 sm:mt-0",children:(0,a.jsxs)("button",{onClick:()=>{u(void 0),w(void 0),o(!0)},className:"inline-flex items-center justify-center rounded-md bg-teal-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-teal-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-teal-600",children:[(0,a.jsx)(p.A,{className:"h-5 w-5 mr-2"}),"Schedule Interview"]})})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)("div",{className:"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6",children:[(0,a.jsx)("dt",{className:"truncate text-sm font-medium text-gray-500",children:"Total Applications"}),(0,a.jsx)("dd",{className:"mt-1 text-3xl font-semibold tracking-tight text-gray-900",children:i.totalApplications})]}),(0,a.jsxs)("div",{className:"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6",children:[(0,a.jsx)("dt",{className:"truncate text-sm font-medium text-gray-500",children:"Active Interviews"}),(0,a.jsx)("dd",{className:"mt-1 text-3xl font-semibold tracking-tight text-gray-900",children:i.activeInterviews})]}),(0,a.jsxs)("div",{className:"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6",children:[(0,a.jsx)("dt",{className:"truncate text-sm font-medium text-gray-500",children:"Applications This Month"}),(0,a.jsx)("dd",{className:"mt-1 text-3xl font-semibold tracking-tight text-gray-900",children:i.applicationsThisMonth})]}),(0,a.jsxs)("div",{className:"overflow-hidden rounded-lg bg-white px-4 py-5 shadow sm:p-6",children:[(0,a.jsx)("dt",{className:"truncate text-sm font-medium text-gray-500",children:"Response Rate"}),(0,a.jsxs)("dd",{className:"mt-1 text-3xl font-semibold tracking-tight text-gray-900",children:[i.responseRate,"%"]})]})]}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)("div",{className:"overflow-hidden rounded-lg bg-white shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-base font-semibold leading-6 text-gray-900",children:"Upcoming Interviews"}),(0,a.jsx)("div",{className:"mt-2",style:{height:"500px"},children:(0,a.jsx)(r.Vv,{localizer:v,events:y,startAccessor:"start",endAccessor:"end",style:{height:"100%"},onSelectEvent:e=>{u(e.resource),o(!0)},onSelectSlot:e=>{let{start:t}=e;w(t),u(void 0),o(!0)},selectable:!0,view:g,onView:e=>f(e),defaultView:"week",views:["month","week","day"],tooltipAccessor:e=>{var t;return"".concat(e.title,"\n").concat((null===(t=e.resource)||void 0===t?void 0:t.notes)||"")},popup:!0,step:60,timeslots:1})})]})})}),(0,a.jsx)(h,{isOpen:n,onClose:()=>o(!1),onInterviewAdded:b,interview:d,selectedDate:x})]})}},61086:(e,t,i)=>{"use strict";i.d(t,{N:()=>a});let a=(0,i(35974).UU)("https://iiugtjtdfavdojniaguw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlpdWd0anRkZmF2ZG9qbmlhZ3V3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzg4NjgwNjUsImV4cCI6MjA1NDQ0NDA2NX0.NEOVJZQ7ahibUkzauftL3Dt2UrP1dszTQToyB87fnwo",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}},e=>{var t=t=>e(e.s=t);e.O(0,[431,586,37,736,46,441,517,358],()=>t(33063)),_N_E=e.O()}]);